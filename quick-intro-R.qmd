# A Quick Introduction to R

## Why Use R?

R has a reputation for being difficult to learn, and a lot of that reputation is deserved. However, it is possible to teach R in an accessible way, and **a little bit of R can take you a long way**.  

[R](https://www.r-project.org/) is open source, and therefore free, statistical software that is particularly good at obtaining, analyzing and visualizing data.

R Commands are stored in a *script* or *code* file that usually ends in .R, e.g. `myscript.R`. The command file is distinct from your actual data, stored in an .RData file, e.g. `mydata.RData`.

A great deal of data analysis and visualization involves the same core set of steps.

Given the fact that we often want to apply the same core set of tasks to new questions and new data, there are ways to overcome the steep learning curve and learn a replicable set of commands that can be applied to problem after problem. **The same 5 to 10 lines of R code can often be tweaked over and over again for multiple projects.**

$$\text{have a question} \rightarrow \text{get data} \rightarrow \text{process and clean data} \rightarrow$$ 
$$\text{visualize data} \rightarrow \text{analyze data} \rightarrow \text{make conclusions}$$

## Get R

[R](https://www.r-project.org/) is available at [https://www.r-project.org/](https://www.r-project.org/). R is a lot easier to run if you run it from RStudio, [http://www.rstudio.com](http://www.rstudio.com).

## Get Data 

Data often comes from other types of data files like SPSS, Stata, or Excel. Especially in beginning R programming, getting the data into R can be the most complicated part of your program.

```{r}

load("./simulate-data/MICSsimulated.RData") # data in R format

```

If data are in other formats, slightly different code may be required. 

```{r, eval=FALSE}

library(haven) # library for importing data 
mydata <- read_sav("the/path/to/mySPSSfile.sav") # SPSS
mydata <- read_dta("the/path/to/myStatafile.dta") # Stata

library(readxl) # library for importing Excel files
mydata <- read_excel("the/path/to/mySpreadsheet.xls")

save(mydata, file = "mydata.RData") # save in R format

```

## Process and Clean Data  

The `$` sign is a kind of "connector".  `mydata$x` means:  "The variable `x` in the dataset called `mydata`". 

```{r}

MICSsimulated$cd1[MICSsimulated$cd1 == -9] <- NA # missing (-9) to NA

```

R makes a strong distinction between *continuous* *numeric* variables that measure  scales like mental health or neighborhood safety, and *categorical* *factor variables* that measure non-ordered categories like religious identity or gender identity. 

Many statistical and graphical procedures are designed to recognize and work with different variable types. You often *don't* need to use all of the options.  e.g. `mydata$w <- factor(mydata$z)` will often work just fine. **Changing variables from factor to numeric, and vice versa can sometimes be the simple solution that solves a lot of problems when you are trying to graph your variables.**

```{r, tidy=FALSE}

MICSsimulated$cd1 <- factor(MICSsimulated$cd1, # original numeric variable
                   levels = c(0, 1), 
                   labels = c("no spank", "spank"), 
                   ordered = TRUE) # whether order matters

# MICSsimulated$z <- as.numeric(MICSsimulated$w) # factor to numeric

```

## Visualize Data

### Barplot 

```{r}
#| fig-height: 3

barplot(table(MICSsimulated$aggression), # what I'm graphing
        names.arg = c("No Aggression", "Aggression"), # names
        main = "Aggression Outcome in Data", # title
        xlab = "Aggression", # label for x axis
        col = "gold") # color

```

:::{.callout-tip}
You often *don't* need to use all of the options.  e.g. `barplot(table(mydata$z))` will work just fine.
:::

## Analyze Data: Descriptive Statistics

```{r, eval=FALSE}

summary(mydata$x) # for continuous or factor variables

table(mydata$z) # especially suitable for factor variables

```

```{r}
table(MICSsimulated$cd1)
```







